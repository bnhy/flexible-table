!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("into-pipes"),require("drag-enabled")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","into-pipes","drag-enabled"],t):t(e["flexible-table"]={},e.ng.core,e.ng.common,e.intoPipes,e.dragEnabled)}(this,function(e,t,n,a,i){"use strict";var o=function(){function e(){this.headers=[]}return e.prototype.generateHeadersFor=function(i,o,r,l){var s=this;return null!==i&&Object.keys(i).map(function(e){var t=o.length?o+"."+e:e;if("string"==typeof i[e]||"number"==typeof i[e]||"boolean"==typeof i[e]){var n={key:t,value:s.makeWords(t),sortable:!0,dragable:!0,present:0===o.length&&s.headers.length<r};l&&(n.filter=""),s.headers.push(n)}else if(i[e]instanceof Array){var a=i[e];!a.length||a[0]instanceof Array||"string"==typeof a[0]?s.headers.push({key:t,value:s.makeWords(t)}):s.generateHeadersFor(a[0],t,r,l)}else s.generateHeadersFor(i[e],t,r,l)}),this.headers},e.prototype.makeWords=function(e){return e.replace(/\./g," ~ ").replace(/([A-Z])/g," $1").replace(/-/g," ").replace(/_/g," ").replace(/^./,function(e){return e.toUpperCase()})},e}();o.decorators=[{type:t.Injectable}],o.ctorParameters=function(){return[]};var r=function(){function e(){this.vocabulary={configureTable:"Configure Table",configureColumns:"Configure Columns",clickSort:"Click to Sort",setSize:"Set Size",firstPage:"First",lastPage:"Last",previousPage:"Previous"},this.tableClass="default-flexible-table",this.onaction=new t.EventEmitter,this.onconfigurationchange=new t.EventEmitter}return e.prototype.ngOnInit=function(){this.headers&&0!==this.headers.length||(this.headers=(new o).generateHeadersFor(this.items[0],"",5,this.enableFiltering)),!this.rowDetailer&&this.expandable&&(this.rowDetailer=function(e){return{data:e,headers:[]}}),this.updateLimits()},e.prototype.updateLimits=function(){this.subHeaders=this.headers.filter(function(e){return!0===e.present})},e.prototype.reconfigure=function(e){this.headers=e,this.updateLimits(),this.onconfigurationchange.emit(e)},e.prototype.onPaginationChange=function(e){this.pageInfo=e},e.prototype.tableAction=function(e){this.onaction.emit(e)},e.prototype.onDrop=function(e){},e}();r.decorators=[{type:t.Component,args:[{selector:"flexible-table",template:'\n<div class="flexible-table">\n    <table-configuration\n        *ngIf="configurable"\n        [headers]="headers"\n        [title]="vocabulary.configureColumns"\n        [action]="vocabulary.configureTable"\n        (onchange)="reconfigure($event)"></table-configuration>\n    <table-view\n\t\t*ngIf="items"\n        [action]="action"\n        [actionKeys]="actionKeys"\n\t\t[tableClass]="tableClass"\n\t\t[caption]="caption"\n\t\t[headers]="subHeaders"\n\t\t[items]="items"\n        [pageInfo]="pageInfo"\n        [vocabulary]="vocabulary"\n\t\t[enableIndexing]="enableIndexing"\n\t\t[enableFiltering]="enableFiltering"\n        [rowDetailer]="rowDetailer"\n        [actionable]="actionable"\n        [expandable]="expandable"\n        (onDrop)="onDrop($event)"\n\t\t(onaction)="tableAction($event)"></table-view>\n</div>\n<table-pagination\n    [info]="pageInfo"\n    [vocabulary]="vocabulary"\n    (onchange)="onPaginationChange($event)"></table-pagination>\n',styles:[":host{display:inline-block!important;width:100%}.flexible-table{position:relative;margin:0 auto;display:table;border-spacing:0;border-collapse:collapse}.flexible-table .off-screen{display:block;float:left;height:0;overflow:hidden;text-indent:-99999px;width:0}.flexible-table table{margin:1rem auto;padding:0;width:100%;table-layout:fixed;max-width:99%;background-color:transparent;border-collapse:collapse}.flexible-table table caption{background-color:#c3e5e2;border-radius:2px;color:#1b1b1b;caption-side:top;font-size:14px;padding:5px 6px;margin-bottom:15px;text-align:left}.flexible-table table thead{border-top:1px solid #bbb;border-bottom:1px solid #bbb;background-color:#eee}.flexible-table table tr{border:0}.flexible-table table tr.expanded td{font-weight:700;border-bottom:0}.flexible-table table td{padding-left:3px}.flexible-table table td:first-child{padding-left:5px}.flexible-table table td .off-screen{display:block;float:left;height:0;overflow:hidden;text-indent:-99999px;width:0}.flexible-table table td.index{background-color:#eee;border-right:1px solid #bbb}.flexible-table table th{cursor:default;-webkit-user-select:none;-moz-user-select:none;-o-user-select:none;-ms-user-select:none;user-select:none;height:24px;position:relative;white-space:nowrap;font-weight:400;text-transform:uppercase;font-size:14px;padding-top:6px;padding-bottom:6px;text-align:left}.flexible-table table th.drag-over{background-color:#9b9b9b}.flexible-table table th.drag-over .icon,.flexible-table table th.drag-over .title{color:#eee}.flexible-table table th:first-child{padding-left:5px}.flexible-table table th.ascending,.flexible-table table th.descending,.flexible-table table th.sortable{cursor:pointer;height:12px}.flexible-table table th.indexable{width:33px}.flexible-table table th.actionable{width:24px}.flexible-table table th .title{color:#254a4d;display:inline-block;height:20px;white-space:nowrap}.flexible-table table th .dragable{cursor:move}.flexible-table table th .icon{width:22px;display:inline-block;height:20px;color:#254a4d}.flexible-table .fa.fa-angle-right{font-size:18px}.flexible-table table tr.detail td{border-top:0;cursor:default}.flexible-table table tr.expanded td a.expanded{background-position:right 2px}.flexible-table table tbody tr:hover{background-color:#ffeed2}.flexible-table table tbody tr.detail:hover,.flexible-table table tbody tr.detail:hover td table thead tr{background-color:inherit}.flexible-table table tr td a.actionable{display:inline-table;height:32px;vertical-align:middle;width:25px;line-height:30px;color:#254a4d}.flexible-table table tbody tr.detail:hover td:last-child{border-right:0}.flexible-table table tbody tr.detail:hover td:first-child{border-left:0}.flexible-table table tr td{border-bottom:1px solid #b1b3b3;color:#254a5d;font-size:15px;text-transform:capitalize}.flexible-table table tbody tr.pointer{cursor:pointer}.flexible-table table.alert-danger{border:0}.flexible-table table.alert-danger caption{background-color:transparent;font-weight:700;margin-bottom:0}.flexible-table table.alert-danger td{border-bottom:0;display:block}.flexible-table table.alert-danger td:first-child{padding-left:0}.flexible-table table.alert-danger td:last-child{border-bottom:0}.flexible-table table.alert-danger td:before{content:attr(data-label);float:left;font-weight:700;text-transform:uppercase;width:20%}.flexible-table table.alert-danger td a span.icon{width:100%}.flexible-table table.alert-danger thead{border:none;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.flexible-table table.alert-danger tr{border:2px solid #fff;display:block;margin-bottom:.625em;padding:5px;border-radius:5px}.flexible-table table.alert-danger tr th.actionable{width:inherit}.flexible-table table.alert-danger tr td{border-bottom:0}@media screen and (max-width:600px){.flexible-table table{border:0}.flexible-table table td{border-bottom:0;display:block;text-align:right}.flexible-table table td:first-child{padding-left:0}.flexible-table table td:last-child{border-bottom:0}.flexible-table table td:before{content:attr(data-label);float:left;font-weight:700;text-transform:uppercase}.flexible-table table td a span.icon{width:100%}.flexible-table table thead{border:none;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.flexible-table table tr{border-bottom:3px solid #ddd;display:block;margin-bottom:.625em}.flexible-table table tr th.actionable{width:inherit}.flexible-table table tr td{border-bottom:0}.flexible-table table.alert-danger td:before{width:inherit}}"]}]}],r.ctorParameters=function(){return[]},r.propDecorators={vocabulary:[{type:t.Input,args:["vocabulary"]}],caption:[{type:t.Input,args:["caption"]}],action:[{type:t.Input,args:["action"]}],actionKeys:[{type:t.Input,args:["actionKeys"]}],tableClass:[{type:t.Input,args:["tableClass"]}],headers:[{type:t.Input,args:["headers"]}],items:[{type:t.Input,args:["items"]}],pageInfo:[{type:t.Input,args:["pageInfo"]}],tableInfo:[{type:t.Input,args:["tableInfo"]}],configurable:[{type:t.Input,args:["configurable"]}],enableIndexing:[{type:t.Input,args:["enableIndexing"]}],enableFiltering:[{type:t.Input,args:["enableFiltering"]}],rowDetailer:[{type:t.Input,args:["rowDetailer"]}],expandable:[{type:t.Input,args:["expandable"]}],expandIf:[{type:t.Input,args:["expandIf"]}],rowDetailerHeaders:[{type:t.Input,args:["rowDetailerHeaders"]}],onaction:[{type:t.Output,args:["onaction"]}],onconfigurationchange:[{type:t.Output,args:["onconfigurationchange"]}]};var l=function(){function e(){this.vocabulary={setSize:"",firstPage:"",lastPage:"",previousPage:""},this.info={contentSize:0,pageSize:0,maxWidth:"0"},this.onchange=new t.EventEmitter,this.onready=new t.EventEmitter}return e.prototype.ngOnInit=function(){var e=this;this.info||(this.info={contentSize:1e3,pageSize:1e3,maxWidth:"0"}),this.info.contentSize&&this.info.pageSize&&(this.info.pages=Math.ceil(this.info.contentSize/this.info.pageSize),this.info.from=0,this.info.to=this.info.pageSize-1,this.info.currentPage=1,setTimeout(function(){return e.ready()},66))},e.prototype.setWidth=function(e){this.info.maxWidth=e+"px"},e.prototype.ready=function(){this.onready.emit(this),this.onchange.emit(this.info)},e.prototype.selectFirst=function(){1<this.info.currentPage&&(this.info.from=0,this.info.to=this.info.from+this.info.pageSize-1,this.info.currentPage=1,this.onchange.emit(this.info))},e.prototype.selectNext=function(){this.info.currentPage<this.info.pages&&(this.info.from=this.info.to+1,this.info.to=this.info.from+this.info.pageSize-1,this.info.currentPage++,this.onchange.emit(this.info))},e.prototype.selectPrev=function(){1<this.info.currentPage&&(this.info.from-=this.info.pageSize,this.info.to=this.info.from+this.info.pageSize-1,this.info.currentPage--,this.onchange.emit(this.info))},e.prototype.selectLast=function(){this.info.currentPage<this.info.pages&&(this.info.from=this.info.pageSize*(this.info.pages-1),this.info.to=this.info.from+this.info.pageSize-1,this.info.currentPage=this.info.pages,this.onchange.emit(this.info))},e.prototype.changeCurrent=function(e){var t=parseInt(e.value,10);this.info.currentPage<t&&0<t&&t<this.info.pages?(this.info.from=t*(this.info.pageSize-1),this.info.to=this.info.from+this.info.pageSize-1,this.info.currentPage=t,this.onchange.emit(this.info)):e.value=this.info.currentPage},e.prototype.changeSize=function(e){var t=parseInt(e.value,10);this.info.contentSize>=t&&1<t?(this.info.pageSize=t,this.info.pages=Math.ceil(this.info.contentSize/t),this.info.from=0,this.info.to=this.info.pageSize-1,this.info.currentPage=1,this.onchange.emit(this.info)):e.value=this.info.pageSize},e}();l.decorators=[{type:t.Component,args:[{selector:"table-pagination",template:'<div *ngIf="info && info.pages > 1" [style.width]="info.maxWidth" class="table-pagination" #paginationWrapper>\n    <div class="fa fa-angle-left"\n         (click)="selectPrev()"\n         [class.disabled]="info.currentPage==1">\n        <span class="prev" [textContent]="vocabulary.previousPage"></span>\n    </div>\n    <div class="fa fa-angle-double-left"\n         (click)="selectFirst()"\n         [class.disabled]="info.currentPage==1">\n        <span class="first" [textContent]="vocabulary.firstPage"></span>\n    </div>\n    <div class="current">\n        <input  #ranger [value]="info.currentPage" (keydown.Enter)="changeCurrent(ranger)" />\n        <span [textContent]="\' / \' + info.pages"></span>\n\t</div>\n    <div class="fa fa-angle-double-right"\n         (click)="selectLast()"\n         [class.disabled]="info.currentPage==info.pages">\n        <span class="last" [textContent]="vocabulary.lastPage"></span>\n    </div>\n    <div class="fa fa-angle-right"\n         (click)="selectNext()"\n         [class.disabled]="info.currentPage==info.pages">\n        <span class="next" [textContent]="vocabulary.nextPage"></span>\n    </div>\n    <div class="reset-size" *ngIf="info.resetSize">\n        <label for="pagination-set-size">\n            <span class="off-screen" [textContent]="vocabulary.setSize"></span>\n            <input id="pagination-set-size" [value]="info.pageSize" (keydown.Enter)="changeSize(sizer)" #sizer />\n        </label>\n    </div>\n</div>\n',styles:[".table-pagination{-webkit-box-sizing:border-box;box-sizing:border-box;background-color:#fff;border:1px solid #254a5d;border-radius:2px;color:#254a5d;bottom:5px;clear:both;display:-webkit-box;display:-ms-flexbox;display:flex;font-size:1em;height:38px;max-width:100%;margin:0 auto;position:fixed;left:40%;z-index:55}.table-pagination .fa{padding:4px 8px;margin-top:5px}.table-pagination .first,.table-pagination .last,.table-pagination .next,.table-pagination .prev{background-repeat:no-repeat;cursor:pointer;width:auto;display:block;height:39px;text-indent:-99999px;-webkit-box-sizing:border-box;box-sizing:border-box}.table-pagination .reset-size{padding:0;height:35px;border-radius:4px}.table-pagination .reset-size input{border:0;border-left:1px solid #4c5854;height:34px;text-align:center;width:30px;margin-right:2px;margin-left:8px}.table-pagination .current{padding:1px 5px}.table-pagination .current input{padding:0 3px;width:14px;height:35px;border:none;text-align:center}.table-pagination .disabled{opacity:.4}@media screen and (max-width:992px){.table-pagination{left:4px}}"]}]}],l.ctorParameters=function(){return[]},l.propDecorators={vocabulary:[{type:t.Input,args:["vocabulary"]}],info:[{type:t.Input,args:["info"]}],onchange:[{type:t.Output,args:["onchange"]}],onready:[{type:t.Output,args:["onready"]}]};var s=function(){function e(){this.onchange=new t.EventEmitter}return e.prototype.reconfigure=function(e,t){t.present=e.checked,this.onchange.emit(this.headers)},e.prototype.enableFilter=function(e,t){t.filter===undefined?t.filter="":delete t.filter,this.onchange.emit(this.headers)},e.prototype.keyup=function(e){13===e.which&&e.target.click()},e}();s.decorators=[{type:t.Component,args:[{selector:"table-configuration",template:'\n<div class="shim"\n    [style.display]="showConfigurationView ? \'block\':\'none\'"\n    (click)="showConfigurationView = !showConfigurationView"></div>\n<a  [attr.tabindex]="0"\n    (keyup)="keyup($event)"\n    (click)="showConfigurationView = !showConfigurationView">\n    <span class="icon fa fa-gear" aria-hidden="true"></span>\n    <span class="off-screen" [textContent]="action"></span>\n</a>\n<ul role="list" [style.display]="showConfigurationView ? \'block\':\'none\'">\n    <p [textContent]="title"></p>\n    <li  *ngFor="let header of headers" role="listitem">\n        <label for="{{header.key ? header.key+\'f\':\'f\'}}">\n            <input type="checkbox" #filter\n                    [id]="header.key ? header.key+\'f\':\'f\'"\n                    [checked]="header.filter !== undefined"\n                    (keyup)="keyup($event)"\n                    (click)="enableFilter(filter, header)" />\n            <span>Filrer</span>\n        </label>\n        <label for="{{header.key ? header.key+\'c\':\'c\'}}">\n            <input type="checkbox" #checkbox\n                    [id]="header.key ? header.key+\'c\':\'c\'"\n                    [value]="header.key"\n                    [checked]="header.present"\n                    (keyup)="keyup($event)"\n                    (click)="reconfigure(checkbox, header)" />\n            <span [textContent]="header.value"></span>\n        </label>\n    </li>\n</ul>\n',styles:[":host{-webkit-box-sizing:border-box;box-sizing:border-box;padding:2px;position:absolute;right:8px;top:18px;z-index:2}:host a{display:block;padding:0;cursor:pointer;z-index:5}:host a .icon{color:#00925b}:host a .off-screen{display:block;text-indent:-9999px;width:0;height:0;overflow:hidden}:host .shim{background-color:rgba(255,255,255,.2);width:100vw;height:100vh;position:fixed;top:0;left:0;z-index:2}:host ul{background-color:#fff;border:1px solid #999;border-radius:4px;display:block;list-style:none;max-height:300px;margin:2px 0;min-width:200px;overflow-y:auto;position:absolute;padding:15px;right:0;-webkit-box-shadow:6px 8px 6px -6px #1b1b1b;box-shadow:6px 8px 6px -6px #1b1b1b;z-index:5}:host ul li{white-space:nowrap}"]}]}],s.ctorParameters=function(){return[]},s.propDecorators={title:[{type:t.Input,args:["title"]}],action:[{type:t.Input,args:["action"]}],headers:[{type:t.Input,args:["headers"]}],onchange:[{type:t.Output,args:["onchange"]}]};var d=function(){function e(e){this.el=e,this.dragging=!1,this.filteredItems=[],this.vocabulary={configureTable:"Configure Table",configureColumns:"Configure Columns",clickSort:"Click to Sort",setSize:"Set Size",firstPage:"First",lastPage:"Last",previousPage:"Previous"},this.tableClass="default-flexible-table",this.onaction=new t.EventEmitter,this.onchange=new t.EventEmitter,this.onfilter=new t.EventEmitter}return e.prototype.findColumnWithID=function(e){for(var t=this.headerColumnElements(),n=null,a=0;a<t.length;a++)if(t[a].getAttribute("id")===e){n=t[a];break}return n},e.prototype.swapColumns=function(e,t){var n=this;if(e.node.parentNode===t.node.parentNode){var a=this.getColumnIndex(e.medium.key),i=this.getColumnIndex(t.medium.key);if(a<0||i<0)return void console.log("invalid drop id",e.medium.key,t.medium.key);var o=this.filteredItems;this.filteredItems=[],setTimeout(function(){var e=n.headers[a];n.headers[a]=n.headers[i],n.headers[i]=e,n.filteredItems=o,n.onfilter.emit(n.filteredItems),n.onchange.emit(n.headers)},33)}else if(e.medium.locked||t.medium.locked){var r=this.filteredItems;this.filteredItems=[],this.onfilter.emit(this.filteredItems),setTimeout(function(){e.medium.locked=!e.medium.locked,t.medium.locked=!t.medium.locked,n.filteredItems=r,n.onfilter.emit(n.filteredItems),n.onchange.emit(n.headers)},33)}},e.prototype.getColumnIndex=function(e){for(var t=-1,n=0;n<this.headers.length;n++)if(this.headers[n].key===e){t=n;break}return t},e.prototype.itemValue=function(e,t){var n=e;return t.map(function(e){n&&(n=n[e])}),n===undefined||null===n||"null"===n?"":String(n)},e.prototype.lock=function(e,t){t.stopPropagation(),t.preventDefault(),e.locked=!e.locked,this.onchange.emit(this.headers)},e.prototype.sort=function(i,e){var o=this;if(i.sortable){for(var t=0;t<this.headers.length;t++){var n=this.headers[t];if(n.key!==i.key){var a=this.findColumnWithID(n.key);a&&(a.classList.remove("ascending"),a.classList.remove("descending"),a.classList.add("sortable")),n.descending=!1,n.ascending=!1}}e.classList.remove("fa-sort"),i.ascending||!i.ascending&&!i.descending?(i.descending=!0,i.ascending=!1,e.classList.remove("fa-sort-asc"),e.classList.add("fa-sort-desc")):(i.descending=!1,i.ascending=!0,e.classList.remove("fa-sort-desc"),e.classList.add("fa-sort-asc"));var r=i.key.split(".");this.items.sort(function(e,t){var n=o.itemValue(e,r),a=o.itemValue(t,r);return i.ascending?a<n?1:-1:n<a?1:-1})}},e.prototype.offsetWidth=function(){return this.table.element.nativeElement.offsetWidth},e.prototype.ngOnInit=function(){this.headers||(this.headers=[]),this.enableFiltering?this.filterItems():this.filteredItems=this.items,this.actionKeys&&(this.actionKeys=this.actionKeys.split(",")),!this.rowDetailer&&this.expandable&&(this.rowDetailer=function(e){return{data:e,headers:[]}}),this.expandable||(this.expandable=function(e,t){return t}),this.rowDetailerHeaders||(this.rowDetailerHeaders=function(e){return[]})},e.prototype.headerColumnElements=function(){return this.table.element.nativeElement.children?this.table.element.nativeElement.children[1].children[0].children:[]},e.prototype.headerById=function(e){var t;for(var n in this.headers)if(this.headers[n].key===e){t=this.headers[n];break}return t},e.prototype.columnsCount=function(){var t=0;return this.headers.map(function(e){e.present&&t++}),this.action&&t++,t},e.prototype.hover=function(e,t){t?e.hover=!0:delete e.hover},e.prototype.keydown=function(e,t){var n=e.which;13!==n&&32!==n||t.click()},e.prototype.offScreenMessage=function(t){var n=this.action;return this.actionKeys.map(function(e){n=n.replace(e,t[e.substring(1,e.length-1)])}),n},e.prototype.cellContent=function(e,t){var n=this.itemValue(e,t.key.split("."));return n!==undefined&&null!=n?n:"&nbsp;"},e.prototype.rowDetailerContext=function(e){return{data:e,tableInfo:this.tableInfo,headers:this.rowDetailerHeaders(e)}},e.prototype.changeFilter=function(e,t){var n=e.which;t.filter=e.target.value,13===n&&this.filterItems()},e.prototype.actionClick=function(e,t){return e.stopPropagation(),this.rowDetailer&&(this.expandIf||this.expandable(t,!1))?t.expanded?delete t.expanded:t.expanded=!0:this.onaction.emit(t),!1},e.prototype.shouldKeepItem=function(e,t){var n=!1;if(e!==undefined&&null!==e&&e.length)if("<"===t[0])n=parseFloat(e)<parseFloat(t.substring(1));else if(">"===t[0])n=parseFloat(e)>parseFloat(t.substring(1));else if("!"===t[0])n=parseFloat(e)!=parseFloat(t.substring(1));else if("*"===t[0]&&"*"!==t[t.length-1]){var a=t.substring(1);n=e.toLowerCase().indexOf(a)!==e.length-a.length}else if("*"!==t[0]&&"*"===t[t.length-1]){a=t.substring(0,t.length-1);n=0!==e.toLowerCase().indexOf(a)}else if("*"===t[0]&&"*"===t[t.length-1]){a=t.substring(1,t.length-1);n=e.toLowerCase().indexOf(a)<0}else n=e.toLowerCase().indexOf(t)<0;return n},e.prototype.filterItems=function(){var r=this;this.filteredItems=this.items.filter(function(e){for(var t=!0,n=0;n<r.headers.length;n++){var a=r.headers[n];if(a.filter&&a.filter.length){var i=a.filter.toLowerCase(),o=r.itemValue(e,a.key.split("."));if(r.shouldKeepItem(o,i)){t=!1;break}}}return t}),this.onfilter.emit(this.filteredItems)},e.prototype.onTableCellEdit=function(e){var t=e.id.split("-"),n=(e.name,e.value),a=this.items[parseInt(t[1])];if(a){for(var i=t[0].split("."),o=a[i[0]],r=1;r<i.length-1;r++)o=o[i[r]];o&&1<i.length&&(o[i[i.length-1]]=n)}},e.prototype.dragEnabled=function(e){return e.medium.dragable},e.prototype.dropEnabled=function(e){return e.destination.medium.dragable},e.prototype.onDragStart=function(e){},e.prototype.onDragEnd=function(e){},e.prototype.onDrop=function(e){this.swapColumns(e.source,e.destination)},e}();d.decorators=[{type:t.Component,args:[{selector:"table-view",template:'\n<table [class]="tableClass"  #flexible>\n    <caption *ngIf="caption" [textContent]="caption"></caption>\n    <thead>\n        <tr>\n            <th scope="col" *ngIf="enableIndexing" id="indexable" class="indexable"></th>\n            <th scope="col" *ngFor="let header of headers"\n                [dragEnabled]="dragEnabled.bind(this)"\n                [dropEnabled]="dropEnabled.bind(this)"\n                [medium]="header"\n                (onDragStart)="onDragStart($event)"\n                (onDragEnd)="onDragEnd($event)"\n                (onDrop)="onDrop($event)"\n                [id]="header.key"\n                [attr.width]="header.width ? header.width : null"\n                [attr.tabindex]="header.sortable ? 0 : -1"\n                (keydown)="keydown($event, th)" (click)="sort(header, icon)">\n                <span *ngIf="header.sortable" class="off-screen"  [textContent]="vocabulary.clickSort"></span>\n                <span class="locker icon fa" #locker\n                        *ngIf="lockable && (headers.length > 1 || header.locked)"\n                        tabindex="0"\n                        title="lock/unlock this column"\n                        (keydown)="keydown($event, locker)" (click)="lock(header, $event)"\n                        [class.fa-lock]="header.locked"\n                        [class.fa-unlock]="!header.locked"></span>\n                <span class="title"\n                        [class.dragable]="header.dragable"\n                        [textContent]="header.value"></span>\n                <span class="icon fa" #icon\n                        [class.fa-sort]="header.sortable"\n                        [class.fa-sort-asc]="header.assending"\n                        [class.fa-sort-desc]="header.desending"></span>\n            </th>\n            <th scope="col" *ngIf="action" id="actionable" class="actionable"></th>\n        </tr>\n    </thead>\n    <tbody>\n        <tr *ngIf="enableFiltering">\n            <td scope="row" *ngIf="enableIndexing" class="index filter">\n                <input type="text" disabled style="opacity:0" />\n            </td>\n            <td scope="row" *ngFor="let header of headers; let i=index" class="filter">\n                <span *ngIf="header.filter === undefined">&nbsp;</span>\n                <input  *ngIf="header.filter !== undefined"\n                        id="filter-{{i}}"\n                        type="text"\n                        (keyup)="changeFilter($event, header)"\n                        [value]="header.filter ? header.filter : \'\'" />\n                <label *ngIf="header.filter !== undefined" for="filter-{{i}}" ><span class="off-screen" >Filter "{{header.value}}"</span><span class="fa fa-search"></span></label>\n            </td>\n            <td scope="row" *ngIf="action"></td>\n        </tr>\n       <ng-template ngFor let-item [ngForOf]="filteredItems" let-i="index">\n            <tr *ngIf="i >= pageInfo.from && i <= pageInfo.to "\n                (click)="actionClick($event, item)"\n                (mouseover)="hover(item, true)"\n                (mouseout)="hover(item, false)"\n                [class.pointer]="action"\n                [class.hover]="item.hover"\n                [class.expanded]="item.expanded"\n                [class.odd]="i%2">\n                <td scope="row" class="index" *ngIf="enableIndexing">{{i + 1}}</td>\n                <td scope="row"\n                    *ngFor="let header of headers"\n                    [attr.data-label]="header.value"\n                    [intoName]="header.value"\n                    [intoId]="header.key + \'-\' + i"\n                    [into]="header.format"\n                    [rawContent]="cellContent(item, header)"\n                    [onComponentChange]="onTableCellEdit.bind(this)"></td>\n                <td scope="row" *ngIf="action">\n                    <a class="actionable"\n                        *ngIf="expandable(item, true)"\n                        tabindex="0"\n                        role="button"\n                        style="cursor:pointer"\n                        [class.expanded]="item.expanded" #clicker\n                        (keydown)="keydown($event, clicker)" (click)="actionClick($event, item)">\n                        <span\n                            class="icon fa"\n                            [class.fa-angle-right]="!rowDetailer"\n                            [class.fa-minus-square-o]="rowDetailer && item.expanded"\n                            [class.fa-plus-square-o]="rowDetailer && !item.expanded"\n                            aria-hidden="true"></span>\n                        <span class="off-screen" [textContent]="offScreenMessage(item)"></span>\n                    </a>\n                </td>\n            </tr>\n            <tr *ngIf="rowDetailer && item.expanded" class="detail" [class.odd]="i%2">\n                <td scope="row" class="index" *ngIf="enableIndexing"></td>\n                <td [attr.colspan]="columnsCount()">\n                    <ng-container [ngTemplateOutlet]="rowDetailer" [ngTemplateOutletContext]="rowDetailerContext(item)"></ng-container>\n                </td>\n            </tr>\n        </ng-template>\n    </tbody>\n</table>\n',styles:[":host{display:inline-block!important;width:100%;position:relative;margin:0 auto;border-spacing:0;border-collapse:collapse}:host .off-screen{display:block;float:left;height:0;overflow:hidden;text-indent:-99999px;width:0}:host table{margin:1rem auto;padding:0;width:100%;table-layout:fixed;max-width:99%;background-color:transparent;border-collapse:collapse}:host table caption{background-color:#c3e5e2;border-radius:2px;color:#1b1b1b;caption-side:top;font-size:14px;padding:5px 6px;margin-bottom:15px;text-align:left}:host table thead{border-top:1px solid #bbb;border-bottom:1px solid #bbb;background-color:#eee}:host table tr{border:0}:host table tr.expanded td{font-weight:700}:host table td{padding-left:3px}:host table td:first-child{padding-left:5px}:host table td .off-screen{display:block;float:left;height:0;overflow:hidden;text-indent:-99999px;width:0}:host table td.filter{padding:0;position:relative}:host table td.filter input{-webkit-box-sizing:border-box;box-sizing:border-box;width:100%;padding:5px}:host table td.filter .fa{position:absolute;top:7px;right:2px;color:#bad}:host table td ::ng-deep img{height:24px}:host table td.index{background-color:#eee;border-right:1px solid #bbb}:host table th{cursor:default;-webkit-user-select:none;-moz-user-select:none;-o-user-select:none;-ms-user-select:none;user-select:none;height:24px;position:relative;white-space:nowrap;font-weight:400;text-transform:uppercase;font-size:14px;padding-top:6px;padding-bottom:6px;text-align:left}:host table th.drag-over{background-color:#9b9b9b}:host table th.drag-over .icon,:host table th.drag-over .title{color:#eee}:host table th:first-child{padding-left:5px}:host table th.ascending,:host table th.descending,:host table th.sortable{cursor:pointer;height:12px}:host table th.indexable{width:33px}:host table th.actionable{width:24px}:host table th .title{color:#254a4d;display:inline-block;height:20px;white-space:nowrap}:host table th .dragable{cursor:move}:host table th .icon{width:22px;display:inline-block;height:20px;color:#254a4d}:host .fa.fa-angle-right{font-size:18px}table tr.expanded td{border-bottom:0}table tr.detail td{border-top:0;cursor:default}table tr.expanded td a.expanded{background-position:right 2px}table tbody tr.hover,table tbody tr:hover{background-color:#ffeed2}table tbody tr.detail.hover,table tbody tr.detail.hover td table thead tr,table tbody tr.detail:hover,table tbody tr.detail:hover td table thead tr{background-color:inherit}table tr td a.actionable{display:inline-table;height:32px;vertical-align:middle;width:25px;line-height:30px;color:#254a4d}table tbody tr.detail.hover td:last-child,table tbody tr.detail:hover td:last-child{border-right:0}table tbody tr.detail.hover td:first-child,table tbody tr.detail:hover td:first-child{border-left:0}table tr td{border-bottom:1px solid #b1b3b3;color:#254a5d;font-size:15px;text-transform:capitalize}table tbody tr.pointer{cursor:pointer}table.alert-danger{border:0}table.alert-danger caption{background-color:transparent;font-weight:700;margin-bottom:0}table.alert-danger td{border-bottom:0;display:block}table.alert-danger td:first-child{padding-left:0}table.alert-danger td:last-child{border-bottom:0}table.alert-danger td:before{content:attr(data-label);float:left;font-weight:700;text-transform:uppercase;width:20%}table.alert-danger td a span.icon{width:100%}table.alert-danger thead{border:none;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}table.alert-danger tr{border:2px solid #fff;display:block;margin-bottom:.625em;padding:5px;border-radius:5px}table.alert-danger tr th.actionable{width:inherit}table.alert-danger tr td{border-bottom:0}@media screen and (max-width:600px){table{border:0}table td{border-bottom:0;display:block;text-align:right}table td:first-child{padding-left:0}table td:last-child{border-bottom:0}table td:before{content:attr(data-label);float:left;font-weight:700;text-transform:uppercase}table td a span.icon{width:100%}table thead{border:none;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}table tr{border-bottom:3px solid #ddd;display:block;margin-bottom:.625em}table tr th.actionable{width:inherit}table tr td{border-bottom:0}table.alert-danger td:before{width:inherit}}"]}]}],d.ctorParameters=function(){return[{type:t.ElementRef}]},d.propDecorators={vocabulary:[{type:t.Input,args:["vocabulary"]}],lockable:[{type:t.Input,args:["lockable"]}],caption:[{type:t.Input,args:["caption"]}],action:[{type:t.Input,args:["action"]}],pageInfo:[{type:t.Input,args:["pageInfo"]}],actionKeys:[{type:t.Input,args:["actionKeys"]}],tableClass:[{type:t.Input,args:["tableClass"]}],headers:[{type:t.Input,args:["headers"]}],items:[{type:t.Input,args:["items"]}],tableInfo:[{type:t.Input,args:["tableInfo"]}],enableIndexing:[{type:t.Input,args:["enableIndexing"]}],enableFiltering:[{type:t.Input,args:["enableFiltering"]}],rowDetailer:[{type:t.Input,args:["rowDetailer"]}],expandable:[{type:t.Input,args:["expandable"]}],expandIf:[{type:t.Input,args:["expandIf"]}],rowDetailerHeaders:[{type:t.Input,args:["rowDetailerHeaders"]}],onaction:[{type:t.Output,args:["onaction"]}],onchange:[{type:t.Output,args:["onchange"]}],onfilter:[{type:t.Output,args:["onfilter"]}],table:[{type:t.ViewChild,args:["flexible",{read:t.ViewContainerRef}]}]};var p=function(){function e(e){this.renderer=e,this.filteredItems=[],this.vocabulary={configureTable:"Configure Table",configureColumns:"Configure Columns",clickSort:"Click to Sort",setSize:"Set Size",firstPage:"First",lastPage:"Last",previousPage:"Previous"},this.tableClass="default-flexible-table",this.onaction=new t.EventEmitter,this.onconfigurationchange=new t.EventEmitter}return e.prototype.scroll=function(e){this.renderer.setElementStyle(this.lockedTable.el.nativeElement,"left",e.target.scrollLeft+"px")},e.prototype.ngOnInit=function(){this.headers||(this.headers=(new o).generateHeadersFor(this.items[0],"",5,this.enableFiltering)),this.filteredItems=this.items,this.reconfigure(this.headers)},e.prototype.evaluatePositioning=function(){this.renderer.setElementStyle(this.unlockedTable.el.nativeElement,"margin-left",this.lockedTable.offsetWidth()+"px")},e.prototype.reconfigure=function(e){this.headers=e,this.lockedHeaders=this.headers.filter(function(e){return!0===e.locked&&e.present}),this.unlockedHeaders=this.headers.filter(function(e){return!0!==e.locked&&e.present}),this.onconfigurationchange.emit(e),setTimeout(this.evaluatePositioning.bind(this),111)},e.prototype.onlock=function(e){this.lockedHeaders=this.headers.filter(function(e){return!0===e.locked&&e.present}),this.unlockedHeaders=this.headers.filter(function(e){return!0!==e.locked&&e.present}),this.onconfigurationchange.emit(e),setTimeout(this.evaluatePositioning.bind(this),111)},e.prototype.changeLockedTableFilteredItems=function(e){this.lockedTable&&(this.lockedTable.filteredItems=e)},e.prototype.changeUnlockedTableFilteredItems=function(e){this.unlockedTable&&(this.unlockedTable.filteredItems=e)},e.prototype.tableAction=function(e){this.onaction.emit(e)},e.prototype.onDrop=function(e){},e}();p.decorators=[{type:t.Component,args:[{selector:"lock-table",template:'<div class="caption">\n\t<table-configuration\n\t\t*ngIf="configurable"\n\t\t[headers]="headers"\n\t\t[title]="vocabulary.configureColumns"\n\t\t[action]="vocabulary.configureTable"\n\t\t(onchange)="reconfigure($event)"></table-configuration>\n\t<div *ngIf="caption" [textContent]="caption"></div>\n</div>\n<div class="smart-table-wrap" (scroll)="scroll($event)">\n\t<table-view #lockedTable\n\t\t*ngIf="items"\n\t\tclass="locked-table"\n\t\tlockable="true"\n\t\t[headers]="lockedHeaders"\n\t\t[items]="filteredItems"\n        [pageInfo]="pageInfo"\n        [vocabulary]="vocabulary"\n\t\t[enableIndexing]="enableIndexing"\n\t\t[enableFiltering]="enableFiltering"\n        [rowDetailer]="rowDetailer"\n\t\t[actionable]="actionable"\n\t\t(onchange)="onlock($event)"\n\t\t(onDrop)="onDrop($event)"\n\t\t(onfilter)="changeUnlockedTableFilteredItems($event)"\n\t\t(onaction)="tableAction($event)"></table-view>\n    <table-view #unlockedTable\n\t\t*ngIf="items"\n\t\tclass="unlocked-table"\n\t\tlockable="true"\n\t\t[headers]="unlockedHeaders"\n\t\t[items]="filteredItems"\n        [pageInfo]="pageInfo"\n        [vocabulary]="vocabulary"\n\t\t[enableFiltering]="enableFiltering"\n        [rowDetailer]="rowDetailer"\n        [actionable]="actionable"\n\t\t(onDrop)="onDrop($event)"\n\t\t(onchange)="onlock($event)"\n\t\t(onfilter)="changeLockedTableFilteredItems($event)"\n\t\t(onaction)="tableAction($event)"></table-view>\n</div>\n<table-pagination [info]="pageInfo" [vocabulary]="vocabulary" #pager></table-pagination>\n',styles:[":host{width:100%;position:relative;margin:0 auto;display:table}:host .off-screen{display:block;float:left;height:0;overflow:hidden;text-indent:-99999px;width:0}:host .caption{background-color:#c3e5e2;border-radius:2px;-webkit-box-sizing:border-box;box-sizing:border-box;color:#1b1b1b;caption-side:top;font-size:14px;margin-bottom:15px;padding:5px 6px;text-align:left;width:100%}:host .caption table-configuration{display:inline-block;float:right;position:unset}:host .smart-table-wrap{border-spacing:0;border-collapse:collapse;border-right:1px solid #aaa;border-bottom:1px solid #aaa;-webkit-box-sizing:border-box;box-sizing:border-box;width:100%;position:relative;overflow-x:auto}:host .smart-table-wrap .unlocked-table ::ng-deep table{max-width:100%;margin-bottom:0;margin-top:0}:host .smart-table-wrap .unlocked-table ::ng-deep table th .locker{cursor:pointer;color:#00925b;text-align:center}:host .smart-table-wrap .unlocked-table ::ng-deep table td,:host .smart-table-wrap .unlocked-table ::ng-deep table th{white-space:nowrap;min-height:23px!important}:host .smart-table-wrap .unlocked-table ::ng-deep table tbody tr{background-color:#fff}:host .smart-table-wrap .unlocked-table ::ng-deep table tbody tr.hover,:host .smart-table-wrap .unlocked-table ::ng-deep table tbody tr:hover{background-color:#ffeed2}:host .smart-table-wrap .unlocked-table ::ng-deep table img{height:14px}:host .smart-table-wrap .locked-table{position:absolute;margin:0 auto;display:inline-table;border-spacing:0;border-collapse:collapse;float:left;z-index:2;width:auto}:host .smart-table-wrap .locked-table ::ng-deep table{display:inline-block;border-right:1px solid #aaa;margin:0;width:auto}:host .smart-table-wrap .locked-table ::ng-deep table th .locker{cursor:pointer;color:#8b0224;text-align:center}:host .smart-table-wrap .locked-table ::ng-deep table td,:host .smart-table-wrap .locked-table ::ng-deep table th{white-space:nowrap;min-height:23px!important}:host .smart-table-wrap .locked-table ::ng-deep table tbody tr{background-color:#fff}:host .smart-table-wrap .locked-table ::ng-deep table tbody tr.hover,:host .smart-table-wrap .locked-table ::ng-deep table tbody tr:hover{background-color:#ffeed2}:host .smart-table-wrap .locked-table ::ng-deep table img{height:14px}@media screen and (max-width:600px){.smart-table-wrap{border:0!important;position:unset;overflow-x:unset}.smart-table-wrap .unlocked-table{margin-left:0!important}.smart-table-wrap .unlocked-table ::ng-deep table td,.smart-table-wrap .unlocked-table ::ng-deep table th{white-space:unset}.smart-table-wrap .unlocked-table ::ng-deep table img{height:30px}.smart-table-wrap .locked-table{position:unset!important;margin:0!important;display:table;left:0!important}.smart-table-wrap .locked-table ::ng-deep table{display:table!important;margin:0!important;width:100%!important}.smart-table-wrap .locked-table ::ng-deep table td,.smart-table-wrap .locked-table ::ng-deep table th{white-space:unset}.smart-table-wrap .locked-table ::ng-deep table img{height:30px}}"]}]}],p.ctorParameters=function(){return[{type:t.Renderer}]},p.propDecorators={vocabulary:[{type:t.Input,args:["vocabulary"]}],caption:[{type:t.Input,args:["caption"]}],action:[{type:t.Input,args:["action"]}],actionKeys:[{type:t.Input,args:["actionKeys"]}],tableClass:[{type:t.Input,args:["tableClass"]}],headers:[{type:t.Input,args:["headers"]}],items:[{type:t.Input,args:["items"]}],pageInfo:[{type:t.Input,args:["pageInfo"]}],tableInfo:[{type:t.Input,args:["tableInfo"]}],configurable:[{type:t.Input,args:["configurable"]}],enableFiltering:[{type:t.Input,args:["enableFiltering"]}],enableIndexing:[{type:t.Input,args:["enableIndexing"]}],onaction:[{type:t.Output,args:["onaction"]}],onconfigurationchange:[{type:t.Output,args:["onconfigurationchange"]}],lockedTable:[{type:t.ViewChild,args:["lockedTable"]}],unlockedTable:[{type:t.ViewChild,args:["unlockedTable"]}]};var b=function(){};b.decorators=[{type:t.NgModule,args:[{imports:[n.CommonModule,i.DragDropModule,a.IntoPipeModule],declarations:[r,p,s,l,d],exports:[r,p],entryComponents:[],providers:[],schemas:[t.CUSTOM_ELEMENTS_SCHEMA]}]}],b.ctorParameters=function(){return[]},e.FlexibleTableComponent=r,e.FlexibleTableModule=b,e.ɵb=s,e.ɵc=l,e.ɵd=d,e.ɵa=p,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=flexible-table.umd.min.js.map
